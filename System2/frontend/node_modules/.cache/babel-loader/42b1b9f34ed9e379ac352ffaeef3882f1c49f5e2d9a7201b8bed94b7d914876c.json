{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{gapi}from\"gapi-script\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const clientId=\"901238362479-qhi62371a9f08ma2jmlmbh1vbctruivj.apps.googleusercontent.com\";//Google Api login\nconst Login=()=>{const navigate=useNavigate();const[isRegistering,setIsRegistering]=useState(false);const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");useEffect(()=>{const initClient=()=>{gapi.load(\"client:auth2\",()=>{gapi.client.init({clientId:clientId,scope:\"https://www.googleapis.com/auth/classroom.courses.readonly\"});});};initClient();},[]);const handleGoogleLogin=()=>{const authInstance=gapi.auth2.getAuthInstance();authInstance.signIn().then(googleUser=>{const token=googleUser.getAuthResponse().access_token;fetch(\"http://localhost:5000/auth/google\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token})}).then(res=>res.json()).then(data=>{localStorage.setItem(\"token\",token);navigate(\"/home\");}).catch(error=>console.error(\"Error:\",error));});};//Manual Login and register\nconst handleManualLogin=e=>{e.preventDefault();const endpoint=isRegistering?\"http://localhost:5000/auth/register\":\"http://localhost:5000/auth/manual\";const payload=isRegistering?{name,email,password}:{email,password};fetch(endpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)}).then(res=>res.json()).then(data=>{if(data.token||data.success){if(data.token){localStorage.setItem(\"token\",data.token);navigate(\"/home\");}else{alert(\"Registration successful. Please log in.\");setIsRegistering(false);setName(\"\");setEmail(\"\");setPassword(\"\");}}else{alert(data.message||\"Something went wrong.\");}}).catch(error=>console.error(\"Auth error:\",error));};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\",maxWidth:\"400px\",margin:\"auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:isRegistering?\"Register\":\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleManualLogin,children:[isRegistering&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),required:true,style:{display:\"block\",width:\"100%\",marginBottom:\"10px\"}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:{display:\"block\",width:\"100%\",marginBottom:\"10px\"}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,style:{display:\"block\",width:\"100%\",marginBottom:\"10px\"}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:\"100%\",marginBottom:\"10px\"},children:isRegistering?\"Register\":\"Login\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGoogleLogin,style:{width:\"100%\",marginBottom:\"10px\"},children:\"Sign in with Google\"}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:\"center\"},children:[isRegistering?\"Already have an account?\":\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsRegistering(!isRegistering),style:{background:\"none\",color:\"blue\",border:\"none\",cursor:\"pointer\"},children:isRegistering?\"Login\":\"Register\"})]})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","gapi","useNavigate","jsx","_jsx","jsxs","_jsxs","clientId","Login","navigate","isRegistering","setIsRegistering","name","setName","email","setEmail","password","setPassword","initClient","load","client","init","scope","handleGoogleLogin","authInstance","auth2","getAuthInstance","signIn","then","googleUser","token","getAuthResponse","access_token","fetch","method","headers","body","JSON","stringify","res","json","data","localStorage","setItem","catch","error","console","handleManualLogin","e","preventDefault","endpoint","payload","success","alert","message","style","padding","maxWidth","margin","children","onSubmit","type","value","onChange","target","required","display","width","marginBottom","onClick","textAlign","background","color","border","cursor"],"sources":["/home/deck/Documents/GitHub/Inventory/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { gapi } from \"gapi-script\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst clientId = \"901238362479-qhi62371a9f08ma2jmlmbh1vbctruivj.apps.googleusercontent.com\";\n\n//Google Api login\nconst Login = () => {\n  const navigate = useNavigate();\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    const initClient = () => {\n      gapi.load(\"client:auth2\", () => {\n        gapi.client.init({\n          clientId: clientId,\n          scope: \"https://www.googleapis.com/auth/classroom.courses.readonly\",\n        });\n      });\n    };\n    initClient();\n  }, []);\n\n  const handleGoogleLogin = () => {\n    const authInstance = gapi.auth2.getAuthInstance();\n    authInstance.signIn().then((googleUser) => {\n      const token = googleUser.getAuthResponse().access_token;\n\n      fetch(\"http://localhost:5000/auth/google\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          localStorage.setItem(\"token\", token);\n          navigate(\"/home\");\n        })\n        .catch((error) => console.error(\"Error:\", error));\n    });\n  };\n\n\n  //Manual Login and register\n  const handleManualLogin = (e) => {\n    e.preventDefault();\n\n    const endpoint = isRegistering\n      ? \"http://localhost:5000/auth/register\"\n      : \"http://localhost:5000/auth/manual\";\n\n    const payload = isRegistering\n      ? { name, email, password }\n      : { email, password };\n\n    fetch(endpoint, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.token || data.success) {\n          if (data.token) {\n            localStorage.setItem(\"token\", data.token);\n            navigate(\"/home\");\n          } else {\n            alert(\"Registration successful. Please log in.\");\n            setIsRegistering(false);\n            setName(\"\");\n            setEmail(\"\");\n            setPassword(\"\");\n          }\n        } else {\n          alert(data.message || \"Something went wrong.\");\n        }\n      })\n      .catch((error) => console.error(\"Auth error:\", error));\n  };\n\n  return (\n    <div style={{ padding: \"20px\", maxWidth: \"400px\", margin: \"auto\" }}>\n      <h2>{isRegistering ? \"Register\" : \"Login\"}</h2>\n\n      {/* Manual Login/Register Form */}\n      <form onSubmit={handleManualLogin}>\n        {isRegistering && (\n          <div>\n            <label>Name:</label>\n            <input\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n              style={{ display: \"block\", width: \"100%\", marginBottom: \"10px\" }}\n            />\n          </div>\n        )}\n        <div>\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n            style={{ display: \"block\", width: \"100%\", marginBottom: \"10px\" }}\n          />\n        </div>\n        <div>\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n            style={{ display: \"block\", width: \"100%\", marginBottom: \"10px\" }}\n          />\n        </div>\n        <button type=\"submit\" style={{ width: \"100%\", marginBottom: \"10px\" }}>\n          {isRegistering ? \"Register\" : \"Login\"}\n        </button>\n      </form>\n\n      <button onClick={handleGoogleLogin} style={{ width: \"100%\", marginBottom: \"10px\" }}>\n        Sign in with Google\n      </button>\n\n      <p style={{ textAlign: \"center\" }}>\n        {isRegistering ? \"Already have an account?\" : \"Don't have an account?\"}{\" \"}\n        <button\n          type=\"button\"\n          onClick={() => setIsRegistering(!isRegistering)}\n          style={{ background: \"none\", color: \"blue\", border: \"none\", cursor: \"pointer\" }}\n        >\n          {isRegistering ? \"Login\" : \"Register\"}\n        </button>\n      </p>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}